!mkdir /home/jupyter/dataset

BUCKET_NAME='yolostudy'
MOUNT_PATH ='/home/jupyter/dataset' 
!gcsfuse --implicit-dirs {BUCKET_NAME} {MOUNT_PATH}
#!gcsfuse --implicit-dirs slow_starter /home/jupyter/dataset

ğŸ˜ŠğŸ˜Š í›ˆë ¨ìš© ì´ë¯¸ì§€ ì••ì¶•í’€ê¸° ğŸ˜ŠğŸ˜Š

zipfilePath = '/home/jupyter/train_images.zip'
destPath = '/home/jupyter/myData/train/images'

%%time
import zipfile

â˜…zipfile ëª¨ë“ˆì€ íŒŒì´ì¬ ë‚´ì¥ ëª¨ë“ˆ ì¤‘ í•˜ë‚˜ë¡œ, zipíŒŒì¼ì„ ì½ê³  ì“°ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ëª¨ë“ˆì´ë‹¤.
ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ zip íŒŒì¼ ë‚´ë¶€ì˜ íŒŒì¼ì„ ì—´ê±°í•˜ê³ ,ì½ê³ ,ì“°ê³ ,ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
zipfile ëª¨ë“ˆì€ ë³„ë„ì˜ ì„¤ì¹˜ ê³¼ì •ì´ í•„ìš” ì—†ë‹¤. ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë ¤ë©´ importë¥¼ í•˜ë©´ ëœë‹¤.

import multiprocessing

â˜…ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ë©€í‹° í”„ë¡œì„¸ì‹±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

import concurrent.futures

â˜…ë³‘ë ¬í™”ë¥¼ í†µí•´ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¨ë‹¤.


def unzip(files):
    with lock:
        zf.extract(files, path=destPath)


zf = zipfile.ZipFile(zipfilePath)    
m = multiprocessing.Manager()
lock = m.Lock()
ZipInfo=[]
with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:
    executor.map(unzip, zf.infolist())

â˜…ProcessPoolExcutor í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ multiprocessing ëª¨ë“ˆì€ ë¶€ëª¨ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì—
pickle ëª¨ë“ˆì„ ì´ìš©í•œ ì§ë ¬í™”ì™€ ì—­ì§ë ¬í™”ê°€ ì¼ì–´ë‚˜ì•¼ í•œë‹¤.
í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ê³¼ ìƒíƒœë¥¼ ê³µìœ í•  í•„ìš”ê°€ ì—†ê³  ë¶€ëª¨ì™€ ìì‹ ì‚¬ì´ì— ì£¼ê³ ë°›ì•„ì•¼í•˜ëŠ”
ë°ì´í„° í¬ê¸°ëŠ” ì‘ì§€ë§Œ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë°ì´í„°ë¡œ ì¸í•œ ì—°ì‚°ëŸ‰ì´ í° ìµœëŒ€ê³µì•½ìˆ˜ ì•Œê³ ë¦¬ì¦˜ì´ë‚˜
ë‹¤ë¥¸ ìˆ˜í•™ ì•Œê³ ë¦¬ì¦˜ì— ì í•©í•˜ë‹¤.

ğŸ˜ŠğŸ˜Š í›ˆë ¨ìš© ë ˆì´ë¸” ì••ì¶•í’€ê¸° ğŸ˜ŠğŸ˜Š

%%time

zipfilePath = '/home/jupyter/train_labels.zip'
destPath = '/home/jupyter/myData/train/xml_labels'

import zipfile
import multiprocessing
import concurrent.futures

def unzip(files):
    with lock:
        zf.extract(files, path=destPath)


zf = zipfile.ZipFile(zipfilePath)    
m = multiprocessing.Manager()
lock = m.Lock()
ZipInfo=[]
with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:
    executor.map(unzip, zf.infolist())

ğŸ˜ŠğŸ˜Š ê²€ì¦ìš© ì´ë¯¸ì§€ ì••ì¶•í’€ê¸° ğŸ˜ŠğŸ˜Š

%%time

zipfilePath = '/home/jupyter/val_images.zip'
destPath = '/home/jupyter/myData/val/images'

import zipfile
import multiprocessing
import concurrent.futures

def unzip(files):
    with lock:
        zf.extract(files, path=destPath)


zf = zipfile.ZipFile(zipfilePath)    
m = multiprocessing.Manager()
lock = m.Lock()
ZipInfo=[]
with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:
    executor.map(unzip, zf.infolist())

ğŸ˜ŠğŸ˜Š ê²€ì¦ìš© ë ˆì´ë¸” ì••ì¶•í’€ê¸° ğŸ˜ŠğŸ˜Š

%%time

zipfilePath = '/home/jupyter/val_labels.zip'
destPath = '/home/jupyter/myData/val/xml_labels'

import zipfile
import multiprocessing
import concurrent.futures

def unzip(files):
    with lock:
        zf.extract(files, path=destPath)


zf = zipfile.ZipFile(zipfilePath)    
m = multiprocessing.Manager()
lock = m.Lock()
ZipInfo=[]
with concurrent.futures.ProcessPoolExecutor(max_workers=16) as executor:
    executor.map(unzip, zf.infolist())
